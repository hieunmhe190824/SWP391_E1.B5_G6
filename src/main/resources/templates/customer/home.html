<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang chủ - Thuê xe</title>

    <!-- ===== LINK CSS FILES ===== -->
    <!-- Thứ tự quan trọng: Variables → Main → Components → Page-specific -->

    <!-- 1. Variables: CSS Variables (màu sắc, spacing...) - SỬA 1 CHỖ, TẤT CẢ THAY ĐỔI -->
    <link rel="stylesheet" th:href="@{/css/variables.css}">

    <!-- 2. Main: CSS chung cho toàn hệ thống -->
    <link rel="stylesheet" th:href="@{/css/main.css}">

    <!-- 3. Components: CSS cho các components (buttons, cards, navbar...) -->
    <link rel="stylesheet" th:href="@{/css/components.css}">

    <!-- 4. Home: CSS riêng cho trang Home -->
    <link rel="stylesheet" th:href="@{/css/home.css}">
</head>
<body>
    <!-- ===== HEADER - Sử dụng component header từ fragments ===== -->
    <!-- Component này chứa: logo, menu navigation, login/register -->
    <div th:replace="~{fragments/header :: header}"></div>

    <!-- ===== PHẦN 1: HERO - Banner chào mừng ===== -->
    <section class="hero">
        <div class="page-container">
            <h1>Tìm Xe Thuê Dễ Dàng</h1>
            <p>Hàng trăm xe chất lượng - Giá cả hợp lý - Đặt xe nhanh chóng</p>

            <!-- Form tìm kiếm xe theo giá -->
            <div class="search-box">
                <form th:action="@{/vehicles}" method="get">
                    <label>Chọn mức giá tối đa (VNĐ/ngày)</label>
                    <select name="maxPrice" class="form-control">
                        <option value="">Tất cả mức giá</option>
                        <option value="700000">Dưới 700,000 VNĐ</option>
                        <option value="1000000">Dưới 1,000,000 VNĐ</option>
                        <option value="1500000">Dưới 1,500,000 VNĐ</option>
                        <option value="2000000">Dưới 2,000,000 VNĐ</option>
                    </select>
                    <button type="submit" class="btn btn-primary">Tìm Xe Ngay</button>
                </form>
            </div>
        </div>
    </section>

    <!-- ===== PHẦN 2: DANH SÁCH XE - Vehicle Listing ===== -->
    <!-- Gộp featuredVehicles và popularVehicles thành 1 danh sách -->
    <section class="section" th:if="${vehicles != null and !vehicles.isEmpty()}">
        <div class="page-container">
            <h2 class="section-title">Danh Sách Xe</h2>

            <!-- Lưới hiển thị các xe (Grid Layout) -->
            <div class="car-grid">
                <!-- th:each lặp qua từng xe trong danh sách vehicles (tối đa 9 xe) -->
                <div class="car-card" th:each="vehicle, iterStat : ${vehicles}" th:if="${iterStat.index < 9}">

                    <!-- Hiển thị ảnh xe từ database -->
                    <img class="car-image"
                         th:src="${vehicle.firstImageUrl}"
                         th:alt="${vehicle.model.brand.brandName + ' ' + vehicle.model.modelName}">

                    <!-- Phần thông tin xe -->
                    <div class="car-info">
                        <!-- Tên xe = Hãng (Brand) + Tên Model -->
                        <div class="car-name"
                             th:text="${vehicle.model.brand.brandName + ' ' + vehicle.model.modelName}">
                            Toyota Camry
                        </div>

                        <!-- Chi tiết: Năm sản xuất -->
                        <div class="car-details"
                             th:text="'Năm: ' + ${vehicle.model.year}">
                            Năm: 2024
                        </div>

                        <!-- Chi tiết: Loại hộp số (Automatic/Manual) -->
                        <div class="car-details"
                             th:text="'Hộp số: ' + ${vehicle.model.transmission}">
                            Hộp số: Automatic
                        </div>

                        <!-- Chi tiết: Số chỗ ngồi -->
                        <div class="car-details"
                             th:text="'Số chỗ: ' + ${vehicle.model.seats}">
                            Số chỗ: 5
                        </div>

                        <!-- Chi tiết: Loại nhiên liệu (Gasoline/Diesel/Electric) -->
                        <div class="car-details"
                             th:text="'Nhiên liệu: ' + ${vehicle.model.fuelType}">
                            Nhiên liệu: Gasoline
                        </div>

                        <!-- Giá thuê mỗi ngày (formatDecimal để định dạng số) -->
                        <div class="car-price"
                             th:text="${#numbers.formatDecimal(vehicle.dailyRate, 0, 'POINT', 0, 'POINT')} + ' VNĐ/ngày'">
                            500,000 VNĐ/ngày
                        </div>

                        <!-- Nút xem chi tiết - Link đến trang chi tiết xe -->
                        <a class="btn btn-primary"
                           th:href="@{/vehicles/{id}(id=${vehicle.id})}">
                            Xem Chi Tiết
                        </a>
                    </div>
                </div>
            </div>

            <!-- Nút xem tất cả xe - Link đến trang danh sách tất cả xe -->
            <div class="text-center" style="margin-top: 40px;">
                <a class="btn btn-primary btn-large" th:href="@{/vehicles}">
                    Xem Tất Cả Xe
                </a>
            </div>
        </div>
    </section>

    <!-- ===== FOOTER - Sử dụng component footer từ fragments ===== -->
    <!-- Component này chứa: copyright, thông tin liên hệ -->
    <div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
